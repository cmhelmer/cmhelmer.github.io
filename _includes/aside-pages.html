{%- comment -%}

Include list of site pages

Only include html pages with "order" metadata

{%- endcomment -%}

<aside id="pages" class="site-pages site-aside">

	{%- assign html_pages = site.html_pages | where_exp: "page", "page.order" | sort: "order" -%}

	{%- if html_pages.size > 0 -%}
	<h1 class="aside-title">Pages</h1>
	<div class="aside-content">
		<ul>
			{%- for html_page in html_pages -%}

			{%- assign page_title = html_page.title -%}
			{%- if html_page.url == "/" -%}
			{%- assign page_title = "Home" -%}
			{%- endif -%}

			{%- if page_title != empty -%}
			<li>
				{%- if html_page.url == page.url -%}
				<span class="doc-name -current">{{ page_title }}</span>
				{%- else -%}
				<a href="{{ html_page.url | relative_url }}" class="doc-name" rel="bookmark">{{ page_title }}</a>
				{%- endif -%}
			</li>
			{%- endif -%}

			{%- endfor -%}
		</ul>
	</div>
	{%- endif -%}

	{%- comment -%}
	{%- comment -%}

		Collections

		Include collections with output and an index, and exclude hard-coded 'posts'

	{%- endcomment -%}

	<h1 class="aside-title">Collections</h1>
	<div class="aside-content">
		<ul>
			{%- assign collections = site.collections | where_exp: "collection", "collection.label != 'posts'" | where: "output", true | sort: "order", "last" -%}
			{%- for collection in collections -%}

			{%- assign index = collection.docs | where_exp: "doc", "doc.slug == 'index'" | first -%}

			{%- if index.url.size > 0 -%}

			{%- comment -%} Make pretty url {%- endcomment -%}
			{%- assign url = index.url | split: "/" | pop | join: "/" | append: "/" -%}
			<li><a href="{{ url | relative_url }}" class="doc-name">{{ collection.title | default: collection.label }}</a></li>

			{%- endif -%}

			{%- endfor -%}
		</ul>
	</div>
	{%- endcomment -%}

</aside>
